<!--
  Generated template for the NewConsultant page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>

    <ion-title *ngIf="consultant.initials === ''">New Consultant</ion-title>
    <ion-title *ngIf="consultant.initials !== ''">Edit Consultant</ion-title>

    <ion-buttons end>
      <button ion-button icon-only (click)="saveConsultant()">
        <ion-icon name="checkmark"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>

  <ion-card *ngIf="consultant.initials === ''">
    <ion-card-header>
      Registering a new Consultant
    </ion-card-header>
    <ion-card-content>
      To register a new consultant you will need to provide an email, contact and assign a new or ongoing mission.
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="isReadOnly">
    <ion-card-header>
      Notice
    </ion-card-header>
    <ion-card-content>
      You can't edit this consultant because he was registered by another business manager. Should you need to update this record,
      please contact the correspondant business manager.
    </ion-card-content>
  </ion-card>

  <ion-list>

    <ion-item-divider>
      <h2><b>Personal info</b></h2>
    </ion-item-divider>

    <ion-item>
      <ion-icon name="ios-contact-outline" item-left></ion-icon>
      <ion-label>Full Name</ion-label>
      <ion-input disabled="{{isReadOnly}}" type="text" value="" [(ngModel)]="consultant.name" ngControl="name" clearInput=true></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-mail-outline" item-left></ion-icon>
      <ion-label>Email</ion-label>
      <ion-input disabled="{{isReadOnly}}" type="email" [(ngModel)]="consultant.email" ngControl="email" clearInput=true></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-call-outline" item-left></ion-icon>
      <ion-label>Phone number</ion-label>
      <ion-input disabled="{{isReadOnly}}" type="tel" [(ngModel)]="consultant.contact" ngControl="telephone" clearInput=true></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-person-outline" item-left></ion-icon>
      <ion-label>HR</ion-label>
      <ion-input disabled="{{isReadOnly}}" type="text" [(ngModel)]="consultant.hr" ngControl="hr" clearInput=true></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-microphone-outline" item-left></ion-icon>
      <ion-label>Languages</ion-label>
      <ion-input disabled="{{isReadOnly}}" type="text" [(ngModel)]="consultant.languages" ngControl="languages"></ion-input>
    </ion-item>

    <ion-item-divider>
      <h2><b>Mission</b></h2>
    </ion-item-divider>

    <ion-item *ngIf="!isReadOnly">
      <ion-label>Client</ion-label>
      <ion-select [(ngModel)]="pickedClient">
        <ion-option *ngFor="let client of clients" [value]="client.id">{{client.name}}</ion-option>
        <ion-option [value]="-1">No client</ion-option>
      </ion-select>
    </ion-item>

    <ion-item text-wrap *ngIf="isReadOnly">
      <p>This consultant is currently assigned to
        <ion-badge item-right>{{consultant.client}}</ion-badge>
      </p>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-build-outline" item-left></ion-icon>
      <ion-label>Role</ion-label>
      <ion-input disabled="{{isReadOnly}}" type="text" [(ngModel)]="consultant.skills" ngControl="skills" clearInput=true></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-calendar-outline" item-left></ion-icon>
      <ion-label>Starting date</ion-label>
      <ion-datetime disabled="{{isReadOnly}}" displayFormat="MMM DD, YYYY" pickerFormat="MMM DD, YYYY" [(ngModel)]="consultant.starting_date"
        ngControl="starting_date"></ion-datetime>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-calendar-outline" item-left></ion-icon>
      <ion-label>Ending date</ion-label>
      <ion-datetime disabled="{{isReadOnly}}" max="2020-12-31" displayFormat="MMM DD, YYYY" pickerFormat="MMM DD, YYYY" [(ngModel)]="consultant.ending_date"
        ngControl="ending_date"></ion-datetime>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-cash-outline" item-left></ion-icon>
      <ion-label>Selling price</ion-label>
      <ion-input disabled="{{isReadOnly}}" (input)='onCostsChanged($event)' type="number" [(ngModel)]="consultant.selling_price"
        ngControl="selling_price"></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-pricetag-outline" item-left></ion-icon>
      <ion-label>Daily cost</ion-label>
      <ion-input disabled="{{isReadOnly}}" (input)='onCostsChanged($event)' type="number" [(ngModel)]="consultant.package" ngControl="package"></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="logo-usd" item-left></ion-icon>
      <ion-label>Profit</ion-label>
      <ion-input disabled="true" type="text" [(ngModel)]="consultant.profit" ngControl="profit"></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-globe-outline" item-left></ion-icon>
      <ion-label>Country</ion-label>
      <ion-input disabled="{{isReadOnly}}" type="text" [(ngModel)]="consultant.country" ngControl="country" clearInput=true></ion-input>
    </ion-item>

    <ion-item>
      <ion-icon name="ios-home-outline" item-left></ion-icon>
      <ion-label>Internal</ion-label>
      <ion-toggle disabled="{{isReadOnly}}" checked="false" [(ngModel)]="consultant.internal" ngControl="internalr"></ion-toggle>
    </ion-item>


    <ion-item-divider>
      <h2><b>Delete record</b></h2>
    </ion-item-divider>

    <ion-item text-wrap *ngIf="!isReadOnly">
      <button ion-button icon-left block color="primary" padding (click)="showDeletePrompt()">
      <ion-icon name="ios-trash-outline"></ion-icon>Delete this record
      </button>
    </ion-item>
  </ion-list>
</ion-content>