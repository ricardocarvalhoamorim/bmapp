<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>BMapp</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

  <ion-card>

    <ion-item>
      <h2 *ngIf="user"><b>Welcome back {{user.name}}!</b></h2>
      <h3>Summary</h3>
      <p>{{today}}</p>
    </ion-item>

    <ion-card-content *ngIf="clients">
      <ion-grid>
        <ion-row text-wrap>
          <ion-col width-10>
            <ion-icon name="ios-briefcase-outline"></ion-icon>
          </ion-col>

          <ion-col width-90>
            <b color="primary" (click)="switchToClientsList()">{{clients.length}} clients in your business unit</b>
          </ion-col>
        </ion-row>
        <ion-row text-wrap *ngIf="userConsultants && userConsultants.length > 0">
          <ion-col width-10>
            <ion-icon name="ios-person-outline"></ion-icon>
          </ion-col>
          <ion-col width-90>
            <b color="primary" (click)="switchToConsultantsList()">{{userConsultants.length}} consultants under your supervision</b>
          </ion-col>
        </ion-row>

        <ion-row text-wrap *ngIf="consultantsOnBench > 0">
          <ion-col width-10>
            <ion-icon name="ios-time-outline"></ion-icon>
          </ion-col>

          <ion-col width-90>
            <b color="primary" (click)="switchToConsultantsList()">... {{consultantsOnBench}} waiting for a mission</b>
          </ion-col>
        </ion-row>

      </ion-grid>
    </ion-card-content>
    <ion-row>
      <ion-col width-50>
        <button ion-button full (click)="switchToConsultantsList()"><b>My Consultants</b></button>
      </ion-col>

      <ion-col width-50>
        <button ion-button full (click)="switchToClientsList()"><b>Clients</b></button>
      </ion-col>
    </ion-row>
  </ion-card>

  <ion-card *ngIf="user && user.target > 0 && progress >= 0">
    <ion-item text-wrap>
      <ion-avatar item-right>
        <h1>{{progress}} %</h1>
      </ion-avatar>
      <h1>Your objectives</h1>
      <p>You established that you want to have <b>{{user.target}}</b> running missions. You can change this in the application
        settings.
      </p>
      <progress max="{{user.target}}" value="{{consultantsOnMission}}"></progress>
    </ion-item>
    <ion-card-content>
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="progress >= 100">
    <ion-item>
      <h2><b>Congrats!</b></h2>
      <p> You have fulfilled your objectives! Maybe its time to take a break...</p>
      <button ion-button color="primary" icon-left (click)="takeABreak()">
          <ion-icon name='check'></ion-icon>
          I want to take a break
        </button>

    </ion-item>
    <ion-card-content>
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="bms && bms.length > 0">
    <ion-item text-wrap>
      <ion-avatar item-right>
        <ion-icon name="analytics"> </ion-icon>
      </ion-avatar>
      <h2>Performance</h2>
      <p>How you compare to other business managers in your unit, based on your <b>running missions</b></p>
    </ion-item>
    <ion-card-content >
      <chart [options]="competitionOptions"></chart>

      <h2><b>Total running missions for BU:</b> {{bUnitMissionCount}}</h2>
      <h2><b>Total running missions for {{user.initials}}:</b> {{consultantsOnMission}}</h2>
    </ion-card-content>
  </ion-card>


  <ion-card *ngIf="userConsultants && userConsultants.length > 0">
    <ion-item text-wrap>
      <ion-avatar item-right>
        <ion-icon name="analytics"> </ion-icon>
      </ion-avatar>
      <h2>Your consultants</h2>
      <p>Your consultants' distribution based on their missions' status</p>
    </ion-item>
    <ion-card-content>
      <chart [options]="consultantsDistributionOptions"></chart>


      <ion-item *ngIf="consultantsOnBench && consultantsOnBench > 0">
        <ion-icon name="ios-alarm-outline" item-left></ion-icon>
        Bench
        <ion-badge item-right>{{consultantsOnBench}} consultants</ion-badge>
      </ion-item>

      <ion-item *ngIf="consultantsOnMission && consultantsOnMission > 0">
        <ion-icon name="ios-build-outline" item-left></ion-icon>
        Assigned
        <ion-badge color="secondary" item-right>{{consultantsOnMission}} consultants</ion-badge>
      </ion-item>

    </ion-card-content>
  </ion-card>

    <ion-card *ngIf="userConsultants && userConsultants.length > 0">
    <ion-item text-wrap>
      <ion-avatar item-right>
        <ion-icon name="analytics"> </ion-icon>
      </ion-avatar>
      <h2>Your clients</h2>
      <p>Your consultants' distribution based on your portfolio</p>
    </ion-item>
    <ion-card-content>
      <chart 
      [options]="clientsOptions">
      </chart>

      <button ion-button full (click)="toggleColors()">
        <ion-icon name="ios-eye-outline">Toggle collors</ion-icon>
      </button>
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="!userConsultants || userConsultants.length === 0">
    <ion-item text-wrap>
      <ion-avatar item-right>
        <ion-icon name="analytics"> </ion-icon>
      </ion-avatar>
      <h2>Your consultants</h2>
      <p>For the moment, you have no consultants on your record. To see statistics about your portfolio, start by adding consultants
        by tapping the button below.</p>
    </ion-item>
  </ion-card>

  <ion-card>

    <ion-item>
      <ion-avatar item-right>
        <ion-icon name="cloud"> </ion-icon>
      </ion-avatar>
      <h2>Settings</h2>
    </ion-item>

    <ion-card-content>
      <p>The app settings allow you to change some aspects of the application. You can also switch between profiles to see the
        app from other business managers perspective.</p>
      <button ion-button color="primary" full (click)="switchToSettings()">Application Settings</button>
    </ion-card-content>
  </ion-card>


  <!--
  <ion-fab padding right bottom>
    <button ion-fab color="primary"><ion-icon name="add"></ion-icon></button>
    <ion-fab-list side="top">
      <button ion-fab (click)="pushNewConsultant()"><ion-icon name="person"></ion-icon></button>
      <button ion-fab (click)="pushNewClient()"><ion-icon name="briefcase"></ion-icon></button>
    </ion-fab-list>
  </ion-fab>
  -->
</ion-content>